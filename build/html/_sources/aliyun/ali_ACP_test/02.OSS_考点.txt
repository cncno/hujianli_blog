# 对象存储OSS

### 考点整理
1.一台ECS实例的图片在多台ECS之间共享的产品叫 对象存储OSS;

2.OSS可以按照PUT请求次数计费，其最小计量单位1千次

    存储和流量按实际使用量，最小计费单位是GB。
    请求次数按PUT型每千次，GET型每万次整数计量计费收费

3.在OSS服务中，Object的命名不能有“\r”

4.云服务器  ECS 和 对象存储OSS搭配 OSS作为静态图片、视频、下载包的存储，以降低存储费用，
搭配  CDN 和  负载均衡 产品可大幅减少用户访问等待时间和降低带宽费用，提高可用性

5.OSS ACL 提供存储空间级别的权限访问控制，

    公共读写：任何人（包括匿名访问）都可以对该存储空间中的文件进行读写操作，所有这些操作产生的费用由该存储空间的创建者承担，请慎用该权限。
    公共读：只有该存储空间的创建者可以对该存储空间内的文件进行写操作，任何人（包括匿名访问）可以对该存储空间中的文件进行读操作。
    私有：只有该存储空间的创建者可以对该存储空间内的文件进行读写操作，其他人无法访问该存储空间内的文件

__当文件所在的Bucket的读写权限是“私有”时，OSS分享链接采用的安全机制是：设置了url分享链接的有效时间，设定的时间一过，用户无法下载__


6.OSS图片服务域名与bucket绑定域名的区别

    1.oss图片服务域名，要在域名服务商那边cname 解析到昆仑域名上或者bucketname.img-cn-region.aliyuncs.com上；
    2.bucket域名是要在域名服务商那边cname 解析到bucketname.oss-cn-region.aliyuncs.com上；
	3.图片服务域名，可以使用图片服务，并且只能访问图片格式的文件；
	4.bucket域名，只要浏览器支持，可以访问任意格式的object，不仅限于图片格式的文件，但是不能进行图片处理；

7.在OSS中，用户的每个文件都是一个Object，文件最大大小根据上传数据方式不同而不同, Put Object方式最大不能超过多少 5 GB
  使用multipart上传方式object大小不能超过48.8TB。

8.OSS与自建存储对比有哪些优势？

    数据更可靠；
	存储能力强；
	系统更安全；
	服务可用性高；

9.Bucket名在整个OSS中具有全局唯一性，且不能修改；

    一个应用，例如图片分享网站，可以对应一个或多个Bucket
    一个用户最多可创建10个Bucket；
    单个Bucket容量限制是2PB；
    OSS总存储容量不限制，单个Bucket容量也不限制。
    Bucket的名称要求全局唯一，且创建之后不支持更改。

10.OSS控制台中的文件夹本质上来说是创建了一个size为0并以"/"结尾的object,该object不可以上传及下载

11.在 OSS 中,使用copyObject方法拷贝时,object大小不能超过1GB

    拷贝一个在OSS上已经存在的object成另外一个object，可以发送一个PUT请求给OSS，并在PUT请求头中添加元素“x-oss-copy-source”来指定拷贝源。
    OSS会自动判断出这是一个Copy操作，并直接在服务器端执行该操作。
    如果拷贝成功，则返回新的object信息给用户。
    该操作适用于拷贝小于1GB的文件，当拷贝一个大于1GB的文件时，必须使用Multipart Upload操作

12.关于OSS的防盗链功能：

    Referer防盗链的优点是设置简单，控制台即可操作；
    可以设置是否允许空Referer访问，但是不能单独设置，需要配合Referer白名单一起使用；
    盗链是通过应用程序模拟HTTP请求，伪造Referer，则会绕过用户防盗链设置；
    如果对防盗链有更高要求的可以参考签名URL防盗链；

13.如果白名单不为空，但设置了允许referer字段为空的规则；则referer为空的请求和符合白名单的请求会被允许；其他请求都会被拒绝。

14.OSS提供了强大的图片处理能力：

    图片格式转换以及缩放、裁剪、旋转处理；
    图片添加图片、文字、图文混合水印；
    自定义图片处理样式以及通过管道顺序调用多种图片处理功能；

15.OSS流量不收取流量费用：

    通过管理控制台、OpenAPI上传文件到OSS
    本地PC上传到OSS
    内网ECS上传文件到OSS上
    通过内网IP下载文件到ECS上

16.OSS+CDN产品结合：解决大量图片存储和快速访问。

17.OSS的Object包括很多的元数据，包括Key值（目录、名称）、http头信息和user自定义元数据。用户在上传Object或者在后续使用的过程中可能需要修改对应的数据。

    删除文件的实现方式
    1. 可以将Object下载到本地，删除原来的Object，重新上传更改为元数据的Object以达到更改的效果。该方法是最基本的方法，但是很耗时并且消耗资源。因此不建议用户使用该方法
	2. 可以通过CopyObjcet或者UploadPartCopy接口对Object进行拷贝，修改过程可以修改目标文件的元数据，再把源文件删除即可，建议用户使用该方法进行操作。

18.OSS的Bucket创建成功后，不可以修改如下属性

    bucket存储空间大小
	bucket名称
	bucket所在地

19.OSS流量说明：

    1，内网流出流量，指通过阿里指云内网从 OSS 下载数据到ECS 服务器所产生的下行流量
    2，外网流入流量，指通过互联网从本地端上传数据到 OSS 所产生的上行流量
    3，内网流入流量，通过阿里云内网从 ECS 服务器上传数据到OSS 所产生的上行流量

20.阿里云的RAM产品可以实现访问控制、安全风险控制

21.静态网站支持如下功能：

	1.默认首页（Index Document Support）
	2.默认404页面（Error Document Support）

22.OSS中模拟实现文件夹的创建操作 使用API  putObject

23.OSS 提供三重备份，具备故障自动恢复能力，保障数据可靠性 99.99999999%。

24.OSS将拒绝处理这次请求,并返回HTTP错误状态码是多少404

25.用户如果想要在OSS中模拟实现文件夹的创建操作,需要使用的API是Copy Object

26.OSS的 “IP黑白名单”功能 是需要 收费的，OSS本身不提供IP黑白名单，可以先使用CDN加速，
然后在CDN上配置IP白名单

27.OSS在可靠性、安全、成本和数据处理能力方面具备明显的优势：

    提供多种鉴权和授权机制及白名单、防盗链、主子账号功能
    免费支持防DDoS攻击、自动流量清洗及黑洞功能
    多用户资源隔离机制

28.确保每一次对OSS的访问都是安全可控的：

       ECS + RAM（访问控制）

29.在OSS API中通过哪个参数的操作可以实现设置object头   COPY Object

30.OSS 可以删除这些不完整的文件,OSS专门提供了 碎片整理的功能

31.OSS控制台支持哪些功能?

	bucket所在地域
	创建时间
	对于bucket操作
	bucket列表

32.Bucket属性设置：

    防盗链设置
    自定义域名绑定
    读写权限（ACL）设置

33.OSS配合RAM可以实现用户隔离各个应用之间的Bucket,实现方式是:

       1.开发环境和正式上线环境中的应用使用不同的Bucket
       2.允许应用读，另一个应用写同一个Bucket里面的文件
       3.让某个应用临时读写某个Bucket，凭证过期之后无法访问

34.OSS为用户提供日志记录的功能，当BucketA开启日志访问功能，会自动按小时访问这个Bucket然后
生成一个BucketB，BucketA和BucketB可以是同一个Bucket也可以不是同一个Bucket，但是用户必须是同一个

35.阿里云弹性伸缩(Auto Scaling)中的伸缩组是指部署了相同应用的云服务器ECS实例的集合,其中的ECS实例既可以是包年包月的,也可以是按量付费的.对于业务量突变的场景,按量计费的ECS实例会在满足业务需求的同时尽可能的节省成本；对于用户已有的包年包月的闲置的ECS实例,也可以手工添加到满足一定条件的伸缩组,能充分利用闲置资源.

36.关于OSS图片处理API channel说法：

    1.一个用户最多可以创建10个Channel
    2.存储容量每个Channel最高支持2PB
    3.IMG名称在整个图片处理服务器中具有全局唯一性，且不能修改